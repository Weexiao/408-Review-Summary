# 一些重点协议

## 物理层

Rj45，802.3

## 数据链路层

SDLC，HDLC，PPP，STP和帧中继等

- PPP

## 网络层

- IP
- IPX
- ICMP
- IGMP
- ARP
- RARP
- OSPF

## 传输层

- TCP
- UDP

应用层

- FTP
- SMTP，POP3
- HTTP
- DNS



# TCP/IP模型各层总结



# 一些重要地址

## MAC地址

## IP地址

## 端口号



# 一些重要设备

## 网络层

### 路由器

## 链路层

### 网桥

### 交换机

## 物理层

### 中继器

功能：对信号进行再生和复制，对衰减的信号进行放大，保持与原数据相同，以增加信号传输距离，延长网络长度；==放大数字信号，仅作用于信号的电气特性==

> 使用双绞线传输数字信号时，使用中继器对其进行放大
>
> 使用双绞线传输模拟信号时，使用放大器对其进行放大

通信双方：中继器有两端，且两端的网络部分是网段，不是子网

- 适用于完全相同的网端的互连，且两个网段的速率要完全一致
- 只将任何电缆上的数据发送到另一端上，仅作用于信号的电气特性，并不管数据中是否有错误数据或不适用于网段的数据

> 两端可连相同媒体，或不同媒体(有线连有线，有线连无线)

5-4-3规则(10BASE5)：互相串联的**中继器个数不能超过4个**，而且用4个中继器串联的**5端通信介质**中只有**3段可以连计算机**，其余用来扩展通信范围的链路端。

### 集线器(多口集线器)

功能：还是对信号进行放大转发

> 不具备信号的定向传递能力，是一个共享设备

常用在星型拓扑中，信号可能冲突

## 总结

|    作用范围    | 冲突域 | 广播域 |
| :------------: | :----: | :----: |
|   物理层设备   |   ×    |   ×    |
| 数据链路层设备 |   √    |   ×    |
|   网络层设备   |   √    |   √    |

冲突域：同一冲突域中，每个节点都能收到被发送的数据帧；同一时间只能有一台设备发送信息的范围

广播域：网络中能收到任何一台设备发出的广播帧的设备的集合；某站点发出一个广播信号，所有能接受这个信号的设备范围

# 一些重要数据结构

1. 虚电路表

	用来维持虚电路

	每一块都记录一个打开的虚电路的信息

# 物理层

## 通信基础

多为选择题，重点是==奈奎斯特定理和香农定理、编码与调制技术、数据交换方式，以及电路交换、报文交换与分组交换技术等==

### 基本概念

#### 数据通信相关术语

1. 数据

   传递信息的实体，通常是有意义的二进制序列

2. 数据通信

   在不同计算机之内传输表示信息的二进制序列的过程

3. 信号

   数据的电气/电磁表现，是数据在信道上的存在形式

   可分为：

   - 数字信号(离散信号)：代表信号的参数取值是离散的

   - 模拟信号(连续信号)：代表信号的参数取值是连续的

     ==发什么信号由信道决定，信道是离散的就发离散信号==

4. 信源

   信号源头

5. 信宿

   信号目的地

6. 信道

   信号的传输媒介；

   Note: 一般用来表示向某一端传输信息的介质，故一条通信线路有一条发送信道和一条接受信道

   分类：

   - 按传输信号分：模拟信道(模拟信号)、数字信道(数字信号)
   - 按传输介质分：无线信道(Wifi)、有线信道(双绞线)

#### 三种通信方式

1. 单工(你说我听)

   一方只能发，另一方只能收，故一条信道

2. 半双工(我一句你一句)

   双方都能收发，但同时只能一方发另一方收，两条信道

3. 全双工(一起说)

   双方可同时收发

#### 数据传输方式

1. 并行传输

   将表示一个字符的8位二进制数同时通过8条信道发送

   特点：速度快，费用高，适合近距离

   多用在计算机内部数据传输

   ```mermaid
   %%{init:{'theme':'base', 'themeVariables':{'fontSize':'8px'}}}%%
   graph LR
   A[发送方]--0-->B[接受方]
   A--其他字符-->B
   A--1-->B
   ```

   

2. 串行传输

   将表示一个字符的8位二进制数按位依次发送

   特点：速度满，费用低，适合远距离

   ```mermaid
   graph LR
   A[发送方]--00001111-->B[接受方]
   ```

   

#### 同步 or 异步传输(实现字符同步方法)

1. 同步传输

   数据的传输以一个数据区块为单位，故也叫区块传输

   在传输数据时，先发出1个或多个同步字符，在发数据

2. 异步传输

   将比特拆分为小组传输，发送方可以在任意时刻发送，接收方不确定什么时候到达

   在发送时数据加上起始位和结束位

​	为什么实现字符同步？

​	需要知道数据的开头、内容、结尾等

#### 速率有关概念

1. 码元

   概念：是指用一个固定时长的信号波形(数字脉冲)，代表不同离散数值的基本波形

   码元是数字通信中数字信号的计量单位，这个时长内的信号称做k进制码元，而该时长称为码元宽度

   当码元的离散状态有M个时(M>2)，此时码元为M进制码元

   Note: 1码元可以携带多个比特的信息量

   > 二进制码元只有0、1两种状态，故其信息量为1比特
   >
   > 四进制码元则有00、01、10、11四种状态，故其信息量为2比特
   >
   > $2^n$进制码元信号量便有$n$比特

2. 速率

   可分为码元传输速率和信息传输速率

   - 码元传输速率(波特率)

     **单位时间内数字通信系统所传输的码元个数(脉冲个数或信号变化次数)**，单位是波特 B

     码元传输速率与码元进制数无关，只与码元长度T有关

     $$R_B=\frac{1}{T}B$$

   - 信息传输速率

     单位时间内数字通信系统所传输的码元所含信息数，单位为比特/秒 b/s

   - 二者关系

     若一个码元携带$n$ bit的信息量，则$M$ B的码元传输速率对应的信息传输速率为$M*n$ bit/s

3. 带宽

   表示单位时间内从网络的一点到另一点所能通过的最高数据率在一单位时间内通过链路的数量，单位是bps（比特每秒）

### 奈奎斯特定理与香农定理

只有此处带宽为Hz

#### 失真

![image-20220726210614672](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/image-20220726210614672.png)

#### 奈氏准则(奈奎斯特定理)

限制码元极限传输速率

**在理想低通(无噪音 带宽受限)条件下，为了避免码间串扰，极限码元传输速率为$2W$Band，W为信道带宽(Hz)；故极限数据传输速率为$2Wlog_2V$b/s，V为码元进制数**

Note:

1. 在任何信道上，码元传输速率都有上限，否则会出现码间串扰线性
2. 信道的带宽越宽(能通过的信号频数越多)，就可以用更高的速率(W越大码元速率越大)进行码元的传输
3. 奈式准则只限制了码元传输速率，没有限制数据传输速率
4. 由于码元传输速率受奈氏准则规约，故要提高数据传输速率，可以设法让码元携带更多的比特信息量，即提高码元进制数

#### 香农定理

信噪比：用来衡量噪声对信号的影响

$$信噪比=\frac{信号的平均速率}{噪声的平均速率}$$ 记为 $\frac{S}{N}$，并用分贝(dB)作为单位，即$信噪比(dB)=10log_{10}\frac{S}{N}$

香农定理

在带宽受限且有噪声的信道中，为了不产生误差，数据传输速率有上限值，一般给定信噪比dB求$\frac{S}{N}$
$$
信道的极限数据传输速率=W*log_2(1+\frac{S}{N}) \qquad (b/s)
$$
Notes:

1. 信道的带宽或信道中信噪比越大，极限数据传输速率越大
2. 传输带宽与信噪比确定后，极限数据传输速率确定
3. 只要信息传输速率低于信道极限信息传输速率，总有方式让数据无差错传输
4. 实际的信道传输速率远低于信道极限信息传输速率

> 若题中有信噪比，则奈氏准则和香农定理各求一次，取其数据传输速率最小值

### 编码与调制

#### 基带信号与宽带信号

信道上传输的信号的两种形式，与数字、模拟信号是两种分类方式

1. 基带信号：将数字信号0、1用两种不同电压表示，再送到数字信道上传输(基带传输)

	> 一般来说基带信号就是发出的直接表达要传输信息的信号
	>
	> 距离近

2. 宽带信号：将基带信号进行调制后形成的==频分复用模拟信号==，再传到==模拟信道==上进行传输(宽带传输)

	> 距离源

#### 编码与调制

编码：用在基带传输，规定0、1表示方法

调制：将基带信号转成宽带信号

![编码和调制](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/%E7%BC%96%E7%A0%81%E5%92%8C%E8%B0%83%E5%88%B6.png)

### 电路交换、报文交换与分组交换

![三种交换方式](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/%E4%B8%89%E7%A7%8D%E4%BA%A4%E6%8D%A2%E6%96%B9%E5%BC%8F.png)

#### 电路交换

原理：在数据传输期间，在源节点和目的节点之间建立一条由中间节点组成的==专用物理链路==，在数据传输结束前，该链路一直存在

阶段

```mermaid
graph LR
A[建立连接 呼叫或电话建立]-->B[通信 电路传输]-->c[释放连接 拆分电路]
```

特点

- 独占资源，在这条链路上用户始终占用
- 适用于远程批处理系统或对实时性要求很高的大量数据传输系统

优缺点

|                             优点                             |                             缺点                             |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
|                          传输时延小                          |                        建立连接事件长                        |
|                   数据顺序到达，无失序问题                   | 线路独占，即使目前线路空闲，其他用户也无法使用，信道使用效率低 |
| 实时性强，双方一旦建立物理通路，便可以实时通信，适用于交互式会话类通话 | 灵活性差，双方连接通路中的任意一点宕机，便必须重新拨号建立新连接，不适应突发通信 |
| 全双工通信，没有冲突，通信双方有不同的信道，不会争用物理信道 |                无数据存储能力，难以平滑通信量                |
|                   适用于数字信号和模拟信号                   | 电路交换时，数据直达，不同类型、不同规格、不同速率的终端很难相互进行通信 |
|             控制简单，电路的交换设备及控制较简单             |     无法发现与纠正传输差错，难以在通信过程中进行差错管理     |

例子

![image-20220728193127989](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/image-20220728193127989.png)

#### 报文交换

报文：网络中交换与传输的数据单元，即站点一次性要发送的数据块；包含了将要发生的完整的数据信息，==其长短很不一致，长度不限且可变==

原理：无需在传输过程中建立物理链路，其数据传输单位为报文；使用存储转发技术

- 每个节点收下整个报文后，暂存报文并检查有无错误
- 当所需的输出链路空闲时，利用路由信息找到下一个节点地址，传输到下一个节点
- 在两个通信用户之间其他线路段可传输其他用户的报文，不独占

优缺点

|                             优点                             |                             缺点                             |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
|       无需建立连接，无建立链接时延，用户可随时发送报文       | 实时性差，不适合传输实时或交互式业务的数据，数据进入交换节点后要经历存储转发过程，从而引起转发时延 |
|   动态分配线路，动态选择报文通过的最佳路径，可以平滑通信量   |                     ==只适用于数字信号==                     |
|          提高线路可靠性，某条链路宕机可选用其他线路          |                                                              |
|                  提高线路利用率，线路不独占                  |                                                              |
|           提供多目标服务，一个报文可到达多个目的地           |                                                              |
| 在存储转发中容易实现代码转换和速率匹配，甚至收发双方可以不同时处于可用状态，便于计算机通信 | 由于报文长度没有限制，而每个中间节点都要完整的接受传来的整个报文，当输出线路不空闲时，还可能要存储多个完整报文等待转发，要求网络中每个节点有较大的缓冲区，为了介绍成本，有时候要把等待转发的报文存在硬盘上，增大了传输时延 |

#### 分组交换

分组：将任意长度的报文划分为等长的小块，然后成块的发送

原理：与报文传输基本类似，只是将传输单元从任意长的报文改为固定长的分组

- 分组一般长为**128B**，以分组为单位进行传输和接收
- 发送节点将数据划分为一定长度的分组，接受节点将报文组装后发送给上层
- 分组=小数据块+控制信息(源地址+目的地址+分组序号)

优缺点

|                             优点                             |                             缺点                             |
| :----------------------------------------------------------: | :----------------------------------------------------------: |
|       无需建立连接，无建立链接时延，用户可随时发送分组       | 比报文传输好一点，但还有存储转发时延，且结点交换机处理能力要求更强 |
|                         线路利用率高                         | 每个分组都要加控制信息，一定程度上降低了通信效率，增加了处理事件 |
|               简化了存储管理，因为分组长度固定               |                                                              |
| 加速存储，后一个分组的存储可以和前一个分组的转发并发操作；传输一个分组比一个报文所需缓冲区小 |                                                              |
|      减少出错几率和重发数据量，提高可靠性，减少传输时延      |                                                              |
|                   分组短小，适用于突发通信                   | 当**分组交换使用数据报传输**时，可能出现失序、丢失或重复分组，分组到达目的地时要对分组排序；若**使用虚电路传输**，虽无失序问题，但有呼叫建立、数据传输、释放虚电路三个阶段 |

#### 数据传输方式选择

- 传输数据量大，且传送事件远大于呼叫时间，采用电路交换(电路时延最小)
- 端到端的通路有很多段的链路组成，采用分组交换
- 从信道利用率上来看，==**报文交换与分组交换优于电路交换，其中分组交换更优，尤其适合于计算机之间的突发通信**==
- ![image-20220728195213802](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/image-20220728195213802.png)

### 数据报传输和虚电路传输

#### 数据报传输

传输过程

> ![image-20220728195525016](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/image-20220728195525016.png)

1. 源主机(A)将报文分成多个分组，依次发送到直接相邻的结点A

2. 结点A对每个分组进行**差错检验和路由选择**，不同分组的下一站可能不同

3. 结点C收到$P_1$后，对$P_1$进行差错检验(其他结点同理)

	若正确则对A发确认信息，A收到确认后丢弃A副本

	若错误则让A重发

4. 分组到达B

特点

1. 用发送方提供无连接服务，发送方可随时发送，接收方可随时接收
2. 同一报文的不同分组到达目的结点时可能失序、重复或丢失
3. 每个分组都有**源+目的地址+分组序号**
4. 分组在存储转发时，需要排队等候，会带来排队时延。当通过交换结点的通信量较大或网络发送拥堵时，这种时延会大大增加，交换结点还可能会丢弃一些分组
5. 网络存在冗余路径，适用于突发性通信、不适用于长报文、会话式通信

#### 虚电路传输

> 传输过程
>
> ![image-20220729194525853](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/image-20220729194525853.png)

存在永久虚电路(PVC)和零食虚电路(SVC)两种

将数据包和电路交换形式相结合

虚电路：一条源主机到目的主机的类似于电路的**逻辑路径**；路径中所有结点都需要维持这条虚电路的建立，都维持一张**虚电路表(具体见上)**

特点

1. 提供连接服务，源节点与目的节点之间建立逻辑连接
2. 一个通信的所有分组都通过虚电路顺序发送，==**分组不携带源地址、目的地址等信息，但包括虚电路号**==；相对数据报方式开销小，同一报文的不同分组到达目的节点不会失序、重复或丢失
3. 分组通过虚电路上每个节点时，**进行差错检验**不进行路由选择
4. **每个节点可能和多个节点之间建立多条虚电路**，每条虚电路支持特点的两个系统之间的数据报传输，可以对两个数据端点的流量进行控制，**两个端系统之间也可能有多条虚电路，为不同进程服务**。
5. 缺点是：当网络中的某个节点或链路宕机时，所有经过该节点或链路的虚电路都被破坏

#### 二者对比

|                    |                         数据报服务                         |                        虚电路服务                        |
| :----------------: | :--------------------------------------------------------: | :------------------------------------------------------: |
|     连接的建立     |                           不需要                           |                           需要                           |
|      目的地址      |                   每个分组都携带目标地址                   |           不需要携带目标地址，只需要带虚电路号           |
|      路由选择      |               在每个通信节点都要进行路由选择               | 不需要，链路建立时便已经路由选择好了，其他时候直接发就OK |
|      分组顺序      |                         不保证顺序                         |                          不失序                          |
|       可靠性       |                  不可靠，可靠性由用户保证                  |                     可靠性由网络保证                     |
| 对网络故障的适应性 | 出故障的节点丢失分组，其他分组路径选择发送变化，可正常传输 |          所有经过故障节点的虚电路均不能正常工作          |
| 差错处理和流量控制 |            由用户主句保证流量控制，不保证可靠性            |              可以由网络负责，可也由用户负责              |

#### ==三种交换时延计算方法==

1. 四种时延
	$$
	发送时延(传播时延)=\frac{数据块长度(bit)}{数据率(b/s)} \\
	传输时延=\frac{链路长度(m)}{传播速度(m/s)} \\
	处理时延=节点存储转发所用时间 \\
	排队时延=节点排队时间
	$$
	1在发送器中，2在链路上，34在节点中

2. 电路交换
	$$
	时延=建立连接时延+传输时延+传播时延 \quad (没有存储转发)
	$$

3. 报文交换
	$$
	发送时延(传播时延)=\frac{数据块长度(bit)}{数据率(b/s)} \\
	传输时延=\frac{链路长度(m)}{传播速度(m/s)} \\
	处理时延=节点存储转发所用时间=单个节点处理时延*节点数 \\
	排队时延=节点排队时间=单个节点排队时延*结点数
	$$

4. 分组交换
	$$
	发送时延(传播时延)=\frac{总分组长度(bit)}{数据率(b/s)}+节点数*\frac{单个分组长度(bit)}{数据率(b/s)} \\
	传输时延=\frac{链路长度(m)}{传播速度(m/s)} \\
	处理时延=最后一个节点的排队时延 \\
	排队时延=一个分组的排队时延
	$$

## 传输介质

### 双绞线、同轴电缆、光纤和无线传输介质

传输介质(传输媒体/传输媒介)：数据传输过程中在发送设备和接受设备之间的物理通路

> Note：不是物理层，可看作第0层
>
> 分类：
>
> - 导向性传输介质：电磁波导向沿着固体媒介传输
> - 非导向性传输介质：自由传输

#### 双绞线(常用)

概念：由两根采用一定规则并排绞合的，相互绝缘的铜导线组成

分类：绞合可以减少对相异导线的电磁干扰

![image-20220729195325918](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/image-20220729195325918.png)

> 双绞线价格便宜，是最常用的传输介质之一，在局域网和传统电话网中普通使用。模拟传揄和数字传输都可以使用双绞线，其通信距离一般为几公里到数十公里。距离太远时，对于**模拟传输**，要用**放大器**放大衰减的信号：对于数字传输，要用中继器将失真的信号整形

#### 同轴电缆

> ![image-20220729200141960](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/image-20220729200141960.png)

#### 光纤

> ![image-20220729200159410](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/image-20220729200159410.png)
>
> ![image-20220729200214910](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/image-20220729200214910.png)

#### 无线传播介质

> ![image-20220729200230559](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/image-20220729200230559.png)

### 物理层接口特性

> ![image-20220729200335844](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/image-20220729200335844.png)

## 物理层设备

见上

# 数据链路层

重点掌握==滑动窗口机制、三种可靠传输协议、各种MAC协议，HDLC协议和PPP协议，特别是**CSMA/CD协议和以太网帧格式，以及局域网的争用期和最小帧长的概念、二进制指数退避算法**==。此外，==中继器、网卡、集线器、网桥和局域网交换机的原理及区别==也要重点掌握

## 数据链路层的功能

### 概述

定义

- 结点：主机、路由器
- 链路：两结点之间的物理通路，传输介质主要为有线(双绞线、同轴电缆)或无线
- 数据链路：两结点之见的逻辑通路，把实现控制数据传输协议的硬件和软件加到链路上便是数据链路
- 帧：数据链路层传输的最小单位，封装网络层数据报

作用：数据链路层负责通过一条链路向另一个物理链路直接相连的相邻结点传输数据

> ![image-20220731194518687](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/image-20220731194518687.png)

功能

1. 为网络层提供服务

	> 三种服务：
	>
	> - 无确认无连接的服务：实时传输，误码率低
	> - 有确认无连接的服务：收到消息确认，超时重传，使用无线传输时误码率高
	> - 有确认有连接的服务：安全可靠

2. 建立、维持、销毁链路

3. 组帧

4. 流量控制：发送方少发

5. 差错控制：帧错或位错

## 封装成帧和透明传输

### 封装成帧

主要指在帧前后加上帧首部和帧尾部，组成帧

> 接收端在收到帧后，就可以通过帧首部和帧尾部(包含很多控制信息，其中帧定界符用来确定帧的界限)来从数据流中取出帧

帧同步：指接收方应当能从比特流中区分帧的起始和结束

组帧的方法

- ![image-20220731195429306](%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E9%87%8D%E8%A6%81%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93.assets/image-20220731195429306.png)

### 透明传输

指不管所传数据是什么样的比特流，都应当能在链路上传输

### 组帧方法

#### 字符计数法

#### 字符(节)填充法

#### 零比特填充法

#### 违规编码法